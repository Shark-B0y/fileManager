# Windows 文件管理系统 - 前端设计文档

## 📋 文档概述

本文档描述了 Windows 文件管理系统的前端界面设计和实现方案。基于 Windows 文件资源管理器的界面风格，提供直观的文件和目录管理功能。

**版本**: v1.0
**创建日期**: 2024
**最后更新**: 2024

---

## 🎨 界面布局设计

### 整体布局结构

```
┌─────────────────────────────────────────────────────────────┐
│  标题栏 (Title Bar)                                          │
├─────────────────────────────────────────────────────────────┤
│  导航栏 (Navigation Bar) - 显示当前路径                      │
│  [←] [→] [↑] [搜索框]                                        │
├─────────────────────────────────────────────────────────────┤
│  工具栏 (Toolbar)                                            │
│  [新建] [剪切] [复制] [粘贴] [重命名] [删除] [排序] [查看]    │
├──────┬──────────────────────────────────────────────────────┤
│      │                                                       │
│ 左   │  主内容区 (Main Content Area)                        │
│ 侧   │  ┌─────────────────────────────────────────────┐   │
│ 导   │  │ 名称    │ 修改日期    │ 类型    │ 大小      │   │
│ 航   │  ├─────────────────────────────────────────────┤   │
│ 树   │  │ 📁 文件夹1  │ 2024/1/1  │ 文件夹  │ -        │   │
│      │  │ 📄 文件1    │ 2024/1/1  │ 文本    │ 1 KB     │   │
│      │  │ ...        │ ...        │ ...     │ ...      │   │
│      │  └─────────────────────────────────────────────┘   │
│      │                                                       │
├──────┴──────────────────────────────────────────────────────┤
│  状态栏 (Status Bar) - 显示项目数量和选中项信息              │
└─────────────────────────────────────────────────────────────┘
```

---

## 📐 组件结构

### 1. 主应用组件 (`App.vue`)

**职责**: 应用根组件，管理整体布局和状态

**结构**:
```vue
<template>
  <div class="file-manager-app">
    <TitleBar />
    <NavigationBar />
    <Toolbar />
    <div class="main-container">
      <Sidebar />
      <MainContent />
    </div>
    <StatusBar />
  </div>
</template>
```

---

### 2. 标题栏组件 (`components/TitleBar.vue`)

**功能**:
- 显示应用标题
- 窗口控制按钮（最小化、最大化、关闭）

**设计要点**:
- 高度: 32px
- 背景: 系统标题栏颜色
- 支持拖拽移动窗口

---

### 3. 导航栏组件 (`components/NavigationBar.vue`)

**功能**:
- 显示当前路径（面包屑导航）
- 前进/后退/向上按钮
- 路径搜索框

**数据结构**:
```typescript
interface NavigationState {
  currentPath: string;        // 当前路径
  history: string[];          // 历史路径栈
  historyIndex: number;       // 当前历史索引
}
```

**交互**:
- 点击路径段可快速跳转
- 支持键盘快捷键（Alt+← 后退，Alt+→ 前进，Alt+↑ 向上）

---

### 4. 工具栏组件 (`components/Toolbar.vue`)

**功能按钮**:
- **新建**: 创建新文件/文件夹
- **剪切**: 剪切选中项
- **复制**: 复制选中项
- **粘贴**: 粘贴剪贴板内容
- **重命名**: 重命名选中项
- **删除**: 删除选中项
- **排序**: 排序选项（名称、日期、类型、大小）
- **查看**: 视图选项（列表、详细信息、大图标、小图标）

**设计要点**:
- 图标按钮，带文字标签
- 禁用状态：当没有选中项时，相关按钮禁用
- 支持键盘快捷键

---

### 5. 侧边栏组件 (`components/Sidebar.vue`)

**功能**:
- 显示文件夹树形结构
- 快速访问常用位置
- 支持展开/折叠

**数据结构**:
```typescript
interface TreeNode {
  id: string;
  name: string;
  path: string;
  type: 'folder' | 'file';
  children?: TreeNode[];
  expanded?: boolean;
  selected?: boolean;
}
```

**快速访问位置**:
- 此电脑
- 桌面
- 文档
- 下载
- 图片
- 视频
- 音乐

**交互**:
- 点击文件夹展开/折叠
- 双击文件夹进入
- 右键菜单（新建、重命名、删除等）

---

### 6. 主内容区组件 (`components/MainContent.vue`)

**功能**:
- 显示当前目录的文件和文件夹列表
- 支持多选
- 支持排序和筛选

**视图模式**:
1. **详细信息视图**（默认）:
   - 列: 名称、修改日期、类型、大小
   - 可调整列宽
   - 可点击列头排序

2. **列表视图**:
   - 紧凑的列表显示

3. **图标视图**:
   - 大图标/小图标显示

**数据结构**:
```typescript
interface FileItem {
  id: string;
  name: string;
  path: string;
  type: 'file' | 'folder';
  size: number;              // 字节
  modifiedDate: Date;
  createdDate: Date;
  icon?: string;             // 图标路径
  extension?: string;         // 文件扩展名
}
```

**交互**:
- 单击选中
- Ctrl+Click 多选
- Shift+Click 范围选择
- 双击打开文件/进入文件夹
- 右键显示上下文菜单
- 拖拽支持

---

### 7. 状态栏组件 (`components/StatusBar.vue`)

**功能**:
- 显示当前目录项目总数
- 显示选中项数量和大小
- 显示当前路径（可选）

**显示格式**:
```
12个项目  选中1个项目 (1 KB)
```

---

## 🎯 核心功能实现

### 阶段一：查看文件和目录（当前阶段）

#### 1.1 目录浏览功能

**需求**:
- 显示指定目录下的文件和文件夹
- 支持进入子目录
- 支持返回上级目录

**API 设计**:
```typescript
// Tauri 命令
interface FileSystemCommands {
  // 获取目录内容
  listDirectory(path: string): Promise<FileItem[]>;

  // 获取文件信息
  getFileInfo(path: string): Promise<FileItem>;

  // 检查路径是否存在
  pathExists(path: string): Promise<boolean>;
}
```

**实现步骤**:
1. 创建 Rust 后端命令获取目录列表
2. 前端调用命令获取数据
3. 渲染文件列表
4. 实现双击进入文件夹功能

#### 1.2 路径导航功能

**需求**:
- 显示当前路径
- 支持路径跳转
- 前进/后退功能

**实现步骤**:
1. 维护路径历史栈
2. 实现面包屑导航
3. 实现前进/后退按钮

#### 1.3 文件信息显示

**需求**:
- 显示文件名
- 显示文件类型
- 显示文件大小
- 显示修改日期

**实现步骤**:
1. 格式化文件大小（B, KB, MB, GB）
2. 格式化日期时间
3. 根据文件扩展名显示图标

---

## 📁 目录结构

```
src/
├── components/              # 组件目录
│   ├── TitleBar.vue        # 标题栏
│   ├── NavigationBar.vue   # 导航栏
│   ├── Toolbar.vue         # 工具栏
│   ├── Sidebar.vue         # 侧边栏
│   ├── MainContent.vue     # 主内容区
│   ├── FileList.vue        # 文件列表
│   ├── FileItem.vue        # 文件项
│   └── StatusBar.vue       # 状态栏
├── composables/            # 组合式函数
│   ├── useFileSystem.ts    # 文件系统操作
│   ├── useNavigation.ts    # 导航管理
│   └── useSelection.ts     # 选择管理
├── types/                  # 类型定义
│   └── file.ts             # 文件相关类型
├── utils/                  # 工具函数
│   ├── formatters.ts       # 格式化函数
│   └── icons.ts            # 图标映射
├── stores/                 # 状态管理（Pinia）
│   ├── fileStore.ts        # 文件状态
│   └── navigationStore.ts # 导航状态
├── App.vue                 # 根组件
└── main.js                 # 入口文件
```

---

## 🎨 样式设计

### 颜色方案

**浅色主题**:
- 背景: `#ffffff`
- 侧边栏背景: `#f5f5f5`
- 选中项背景: `#e3f2fd`
- 悬停背景: `#f5f5f5`
- 文字: `#212121`
- 边框: `#e0e0e0`

**深色主题**:
- 背景: `#1e1e1e`
- 侧边栏背景: `#252526`
- 选中项背景: `#094771`
- 悬停背景: `#2d2d30`
- 文字: `#cccccc`
- 边框: `#3e3e42`

### 字体

- 主字体: `Segoe UI`, `Microsoft YaHei`, `Arial`, `sans-serif`
- 代码字体: `Consolas`, `Monaco`, `monospace`
- 基础字号: 14px

### 间距

- 组件间距: 4px
- 内边距: 8px
- 外边距: 4px

---

## 🔧 技术栈

### 前端框架
- **Vue 3**: 使用 Composition API
- **TypeScript**: 类型安全
- **Vite**: 构建工具

### UI 组件库
- 考虑使用 **Element Plus** 或 **Naive UI**（可选）
- 或自定义组件（当前阶段）

### 状态管理
- **Pinia**: Vue 3 官方状态管理

### 样式方案
- **CSS Modules** 或 **Scoped CSS**
- 支持主题切换

---

## 📝 实现优先级

### 第一阶段：基础文件浏览（当前阶段）

1. ✅ **目录结构搭建**
   - 创建组件目录
   - 创建类型定义
   - 创建工具函数

2. ✅ **主布局实现**
   - App.vue 布局
   - 基础组件框架

3. ✅ **文件列表显示**
   - 实现 MainContent 组件
   - 实现 FileList 组件
   - 实现 FileItem 组件

4. ✅ **路径导航**
   - 实现 NavigationBar 组件
   - 实现路径显示和跳转

5. ✅ **侧边栏**
   - 实现 Sidebar 组件
   - 实现文件夹树

6. ✅ **后端集成**
   - 创建 Rust 命令获取目录列表
   - 前端调用命令

### 第二阶段：增强功能

- 文件选择（单选/多选）
- 排序功能
- 视图切换
- 右键菜单
- 状态栏显示

### 第三阶段：文件操作

- 新建文件/文件夹
- 重命名
- 删除
- 复制/剪切/粘贴

---

## 🚀 开发计划

### 第1周：基础框架
- 搭建项目结构
- 实现主布局
- 实现基础组件

### 第2周：文件浏览
- 实现文件列表
- 实现路径导航
- 集成后端 API

### 第3周：交互功能
- 实现选择功能
- 实现排序
- 实现视图切换

---

## 📚 参考资源

- [Windows 文件资源管理器设计指南](https://docs.microsoft.com/windows/apps/design/)
- [Vue 3 文档](https://vuejs.org/)
- [Tauri 文档](https://tauri.app/)
- [Element Plus 文档](https://element-plus.org/)（如使用）

---

## 🔄 更新日志

### v1.0 (2024)
- 初始版本
- 完成界面布局设计
- 完成组件结构设计
- 完成第一阶段功能规划

---

**文档维护**: 本文档将随着开发进度持续更新。

