//! Tauriå‘½ä»¤æ¨¡å—
//!
//! â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//! âš ï¸  é‡è¦ï¼šä»£ç è§„èŒƒè¦æ±‚  âš ï¸
//! â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//!
//! æœ¬æ–‡ä»¶åªä¿ç•™æœ€ç®€å•çš„å‡½æ•°è°ƒç”¨å’ŒæŽ¥å£å®šä¹‰ï¼
//!
//! ðŸ“‹ å¼ºåˆ¶è¦æ±‚ï¼š
//!   1. âŒ ç¦æ­¢åœ¨æ­¤æ–‡ä»¶ä¸­å®šä¹‰æ•°æ®ç»“æž„ï¼ˆstructã€enumç­‰ï¼‰
//!      âœ… æ‰€æœ‰æ•°æ®ç»“æž„åº”å®šä¹‰åœ¨ models/ æ¨¡å—ä¸­
//!
//!   2. âŒ ç¦æ­¢åœ¨æ­¤æ–‡ä»¶ä¸­å®žçŽ°ä¸šåŠ¡é€»è¾‘
//!      âœ… æ‰€æœ‰ä¸šåŠ¡é€»è¾‘åº”å®žçŽ°åœ¨ services/ æ¨¡å—ä¸­
//!
//!   3. âœ… æœ¬æ–‡ä»¶åªåº”åŒ…å«ï¼š
//!      - #[tauri::command] å®æ ‡è®°çš„å‡½æ•°
//!      - å‡½æ•°å‚æ•°å’Œè¿”å›žå€¼çš„ç±»åž‹è¯´æ˜Ž
//!      - å¯¹æŽ¥å£åŠŸèƒ½çš„ç®€è¦è¯´æ˜Ž
//!      - è°ƒç”¨ services æ¨¡å—ä¸­çš„æ–¹æ³•
//!
//! ðŸ“ ç¤ºä¾‹æ ¼å¼ï¼š
//!   ```rust
//!   /// æŽ¥å£åŠŸèƒ½è¯´æ˜Ž
//!   #[tauri::command]
//!   pub async fn command_name(param: Type) -> Result<ReturnType, String> {
//!       Service::method(param).await
//!   }
//!   ```
//!
//! â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

use crate::models::file_system::DirectoryInfo;
use crate::services::FileSystemService;

/// é—®å€™å‘½ä»¤ï¼ˆç¤ºä¾‹å‘½ä»¤ï¼‰
///
/// # å‚æ•°
/// - `name`: è¦é—®å€™çš„åç§°
///
/// # è¿”å›ž
/// é—®å€™æ¶ˆæ¯å­—ç¬¦ä¸²
#[tauri::command]
pub async fn greet(name: &str) -> Result<String, String> {
    Ok(format!("Hello, {}! You've been greeted from Rust!", name))
}

/// èŽ·å–ç›®å½•å†…å®¹
///
/// åˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
///
/// # å‚æ•°
/// - `path`: ç›®å½•è·¯å¾„
///
/// # è¿”å›ž
/// - `Ok(DirectoryInfo)`: ç›®å½•ä¿¡æ¯ï¼ŒåŒ…å«æ–‡ä»¶åˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯
/// - `Err(String)`: é”™è¯¯ä¿¡æ¯
#[tauri::command]
pub async fn list_directory(path: String) -> Result<DirectoryInfo, String> {
    FileSystemService::list_directory(&path)
}

/// èŽ·å–ç”¨æˆ·ä¸»ç›®å½•
///
/// èŽ·å–å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•è·¯å¾„
///
/// # è¿”å›ž
/// - `Ok(String)`: ç”¨æˆ·ä¸»ç›®å½•è·¯å¾„
/// - `Err(String)`: é”™è¯¯ä¿¡æ¯
#[tauri::command]
pub async fn get_home_directory() -> Result<String, String> {
    FileSystemService::get_home_directory()
}

/// èŽ·å–æ‰€æœ‰é©±åŠ¨ç›˜åˆ—è¡¨
///
/// èŽ·å– Windows ç³»ç»Ÿä¸­æ‰€æœ‰å¯ç”¨çš„é©±åŠ¨ç›˜åˆ—è¡¨
///
/// # è¿”å›ž
/// - `Ok(DirectoryInfo)`: åŒ…å«æ‰€æœ‰é©±åŠ¨ç›˜çš„ç›®å½•ä¿¡æ¯
/// - `Err(String)`: é”™è¯¯ä¿¡æ¯
#[tauri::command]
pub async fn list_drives() -> Result<DirectoryInfo, String> {
    FileSystemService::list_drives()
}

/// æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”ä¸ºç›®å½•
///
/// éªŒè¯æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªç›®å½•
///
/// # å‚æ•°
/// - `path`: è¦æ£€æŸ¥çš„è·¯å¾„
///
/// # è¿”å›ž
/// - `Ok(true)`: è·¯å¾„å­˜åœ¨ä¸”ä¸ºç›®å½•
/// - `Ok(false)`: è·¯å¾„ä¸å­˜åœ¨æˆ–ä¸æ˜¯ç›®å½•
/// - `Err(String)`: é”™è¯¯ä¿¡æ¯
#[tauri::command]
pub async fn check_path_exists(path: String) -> Result<bool, String> {
    FileSystemService::check_path_exists(&path)
}