# Windows本地文件管理系统 - Claude上下文索引

## 📋 项目概述

**项目类型**：Windows桌面文件管理应用（基于标签的智能文件管理系统）

**核心功能**：
- 🏷️ 智能标签管理：为文件添加多标签，支持层级标签结构
- 🔍 精准文件搜索：标签组合搜索（AND/OR逻辑），模糊匹配
- 🔄 智能文件识别：文件指纹识别，移动/修改后自动关联标签
- 💻 本地化运行：数据本地存储，保护隐私，无需网络连接

**目标用户**：需要管理大量视频和图片文件的Windows用户

**项目状态**：规划设计阶段完成，文档体系完整，准备进入开发实施阶段

## 🏗️ 技术栈

### 当前技术栈：Rust + Tauri + Vue 3 + PostgreSQL
- **前端**：Tauri 2.0 + Vue 3 + TypeScript + Vite
- **后端**：Rust + Tokio（异步运行时）
- **数据库**：PostgreSQL 15+（主选）/ SQLite（备选）
- **文件监控**：notify-rs（跨平台文件系统监控）
- **哈希算法**：SHA-256（ring库） + 增量指纹
- **ORM**：Diesel 或 SeaORM


## 📁 项目结构

```
e:\fileManager\
├── .claude/                    # Claude配置目录
│   └── settings.local.json     # Claude权限设置
├── doc/                        # 项目文档目录（已迁移至此）
│   ├── 产品需求文档.md         # 产品功能需求
│   ├── 技术规范.md             # 编码规范和技术标准
│   ├── 技术栈变更总结.md       # 技术栈变更分析
│   ├── 技术栈方案.md           # 详细技术方案（47KB，核心文档）
│   ├── 数据库设计详解.md       # 数据库设计文档
│   ├── 项目开发计划.md         # 13周开发计划
│   ├── 项目文档总览.md         # 文档索引
│   └── 项目总结.md             # 项目概述
├── file-manager/              # 主项目代码目录（Tauri + Vue项目）
├── README.md                  # 项目总览文档（安装、使用、架构）
└── API文档.md                # 前后端通信api文档
```

### 主项目目录结构（file-manager/ - Tauri + Vue 3）：
```
file-manager/
├── public/                    # 静态资源
├── src/                       # Vue 3前端源代码
│   ├── assets/               # 静态资源（图片、图标等）
│   ├── components/           # Vue组件目录（待按功能模块组织）
│   ├── pages/               # 页面组件（待实现）
│   ├── services/            # 服务层（待实现）
│   ├── stores/              # 状态管理（待实现）
│   ├── styles/              # 样式文件（待实现）
│   ├── types/               # TypeScript类型定义（待实现）
│   ├── utils/               # 工具函数（待实现）
│   ├── App.vue              # 主应用组件
│   └── main.js              # 应用入口文件
├── src-tauri/                # Rust后端代码
│   ├── migrations/          # 数据库迁移
│   └── src/                 # Rust源代码
│       ├── database/        # 数据库访问层
│       ├── models/          # 数据模型
│       ├── services/        # 业务服务层
│       ├── system/          # 系统集成层
│       └── utils/           # 工具函数
├── package.json              # Vue项目依赖配置
├── vite.config.js            # Vite构建配置
└── tests/                    # 测试目录（待实现）
```

## 📊 核心数据模型

### 主要表结构
1. **files表**：文件信息（哈希、路径、元数据）
   - `file_hash`：SHA-256文件内容哈希（核心标识）
   - `current_path`：当前路径
   - `file_type`：区分视频(.mp4,.avi)和图片(.jpg,.png)
   - `file_size`：大视频文件处理
   - `fingerprint_data`：存储视频时长、分辨率、图片尺寸等元数据

2. **tags表**：标签定义（名称、颜色、层级）
   - `name`：标签名称（支持层级标签）
   - `color`：标签颜色可视化
   - `parent_id`：父标签ID（如"旅行/2024/日本"）
   - `usage_count`：使用次数统计（智能推荐）

3. **file_tags表**：文件-标签关联
   - `confidence`：关联置信度(0.0-1.0)（智能推荐基础）

4. **file_changes表**：文件变更历史
---

**项目状态**：开发实施阶段进行中 🚧
- ✅ 规划设计阶段完成
- ✅ 文档体系整理完成（已迁移至doc目录）
- ✅ 技术栈确定：Tauri + Vue 3 + Rust
- 🔄 前端框架迁移至Vue 3完成
- 📋 待实现：核心功能开发

**当前进展**：前端已从React迁移至Vue 3，文档已统一整理至doc目录，准备开始核心功能开发。

## 📝 Claude搜索规则

### 文档搜索规则
1. **优先搜索文档**：当需要了解项目信息时，优先搜索`doc/`目录下的`.md`文档文件
2. **避免重复提问**：在提问前先查阅相关文档，确保问题在文档中无明确答案
3. **上下文保持**：在对话中引用文档内容时，需注明文档名称和章节
4. **文档位置**：所有项目文档已统一迁移至`doc/`目录，根目录仅保留README.md、CLAUDE.md和API文档.md

### 目录排除规则
1. **禁止搜索目录**：任何时候都不要查询`file-manager/src-tauri/target`目录下的所有内容
2. **排除原因**：该目录是Rust编译生成的二进制文件和中间文件，不具备实际意义，搜索会浪费token并产生无关结果
3. **替代方案**：如需了解项目结构，请参考本文档中的项目结构说明

*此文档为Claude上下文索引，旨在用最少token提供项目核心信息，便于新对话快速了解项目上下文。*